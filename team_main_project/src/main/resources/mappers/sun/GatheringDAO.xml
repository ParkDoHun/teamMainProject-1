<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.boot.teamMainProject.dao.IGatheringDAO">
  	<resultMap id="gatheringResult" type="com.boot.teamMainProject.model.GatheringVO">
  		<result property="gatNo" column="gatNo"/>
  		<result property="memNick" column="memNick"/>
  		<result property="gatName" column="gatName"/>
  		<result property="gatInfo" column="gatInfo"/>
  		<result property="hobbyNo" column="hobbyNo"/>
  		<result property="gatArea" column="gatArea"/>
  		<result property="gatOpen" column="gatOpen"/>
  		<result property="gatHate" column="gatHate"/>
  		<result property="gatPhoto" column="gatPhoto"/>
  	</resultMap>
  	
  	<select id="showlist" resultMap="gatheringResult">
  		select * from gathering WHERE hobbyNo=#{hobbyNo}
  	</select>
  	
  	<select id="detailgat" resultMap="gatheringResult">
  		select * from gathering WHERE gatNo=#{gatNo}
  	</select>
  	
  	
  	
  	
  	
  	<!-- sej -->
  	<!-- 전체 모임 조회 : Best -->
 	<select id="listAllGatherBest" resultMap="gatheringResult">
 		SELECT * FROM gathering ORDER BY gatHate
 	</select>
  	
  	<!-- 전체 모임 조회 : 신규 -->
 	<select id="listAllGatherNew" resultMap="gatheringResult">
 		SELECT * FROM gathering ORDER BY gatOpen DESC
 	</select>
 	
 	<!-- 모임 검색  -->
	<select id="gatherSearch" resultMap="gatheringResult" parameterType="hashmap">
		SELECT * FROM gathering WHERE (gatName LIKE CONCAT('%', #{keyword}, '%')) OR (gatArea LIKE CONCAT('%', #{keyword}, '%'))
	</select>
  	
  </mapper>
